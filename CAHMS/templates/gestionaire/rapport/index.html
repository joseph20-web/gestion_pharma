{% extends 'gestionaire/base.html' %}

{% block title %}Rapports et Analyses{% endblock %}

{% block breadcrumb %}
<nav aria-label="breadcrumb" class="mb-4 animate-fade-in">
    <ol class="breadcrumb bg-primary-modern rounded-modern shadow-modern px-4 py-3">
        <li class="breadcrumb-item">
            <a href="{% url 'dashboard' %}" class="text-decoration-none">
                <i class="fas fa-home me-2"></i>Dashboard
            </a>
        </li>
        <li class="breadcrumb-item active" aria-current="page">
            <i class="fas fa-chart-bar me-2"></i>Rapports et Analyses
        </li>
    </ol>
</nav>
{% endblock %}

{% block page_header %}
<div class="mb-4 animate-slide-in">
    <h1 class="h3 mb-1 text-primary-modern">
        <i class="fas fa-chart-bar me-2"></i>Rapports et Analyses
    </h1>
    <p class="text-muted">Consultez et analysez les données de votre stock pharmaceutique</p>
</div>
{% endblock %}

{% block content %}
<div class="row g-4">
    <!-- Rapport d'Approvisionnement -->
    <div class="col-md-6 col-lg-3 mb-4">
        <div class="card-modern h-100 animate-fade-in">
            <div class="card-body-modern text-center">
                <div class="mb-3">
                    <i class="fas fa-truck fa-3x text-primary-modern"></i>
                </div>
                <h5 class="card-title fw-bold">Rapport d'Approvisionnement</h5>
                <p class="card-text text-muted small">
                    Consultez les approvisionnements de médicaments par période avec filtrage par dates.
                </p>
                <div class="mt-3">
                    <a href="{% url 'rapport_approvisionnement' %}" class="btn-modern w-100" style="background:#1677ff;color:#fff;">
                        <i class="fas fa-eye me-2"></i>Consulter
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- État de Stock -->
    <div class="col-md-6 col-lg-3 mb-4">
        <div class="card-modern h-100 animate-fade-in">
            <div class="card-body-modern text-center">
                <div class="mb-3">
                    <i class="fas fa-boxes fa-3x text-success"></i>
                </div>
                <h5 class="card-title fw-bold">État de Stock</h5>
                <p class="card-text text-muted small">
                    Vérifiez l'état actuel du stock avec filtrage par catégorie et seuil critique.
                </p>
                <div class="mt-3">
                    <a href="{% url 'rapport_etat_stock' %}" class="btn-modern w-100" style="background:#198754;color:#fff;">
                        <i class="fas fa-eye me-2"></i>Consulter
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Activité Globale -->
    <div class="col-md-6 col-lg-3 mb-4">
        <div class="card-modern h-100 animate-fade-in">
            <div class="card-body-modern text-center">
                <div class="mb-3">
                    <i class="fas fa-chart-line fa-3x text-info"></i>
                </div>
                <h5 class="card-title fw-bold">Activité Globale</h5>
                <p class="card-text text-muted small">
                    Analysez les entrées et sorties de stock avec rapports détaillés par période.
                </p>
                <div class="mt-3">
                    <a href="{% url 'rapport_activite_globale' %}" class="btn-modern w-100" style="background:#00cfff;color:#222;">
                        <i class="fas fa-eye me-2"></i>Consulter
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Rapport des Pertes -->
    <div class="col-md-6 col-lg-3 mb-4">
        <div class="card-modern h-100 animate-fade-in">
            <div class="card-body-modern text-center">
                <div class="mb-3">
                    <i class="fas fa-exclamation-triangle fa-3x text-danger"></i>
                </div>
                <h5 class="card-title fw-bold">Rapport des Pertes</h5>
                <p class="card-text text-muted small">
                    Analysez les pertes déclarées avec filtrage par date, produit et type de perte.
                </p>
                <div class="mt-3">
                    <a href="{% url 'rapport_pertes' %}" class="btn-modern w-100" style="background:#dc3545;color:#fff;">
                        <i class="fas fa-eye me-2"></i>Consulter
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Informations sur les rapports -->
<div class="row mt-4">
    <div class="col-12">
        <div class="card-modern animate-fade-in">
            <div class="card-header-modern">
                <i class="fas fa-info-circle me-2"></i>Informations sur les Rapports
            </div>
            <div class="card-body-modern">
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="fw-bold text-primary-modern mb-3">
                            <i class="fas fa-print me-2"></i>Fonctionnalités d'Impression
                        </h6>
                        <ul class="list-unstyled small">
                            <li><i class="fas fa-check text-success me-2"></i>Tous les rapports sont imprimables</li>
                            <li><i class="fas fa-check text-success me-2"></i>Format optimisé pour l'impression</li>
                            <li><i class="fas fa-check text-success me-2"></i>Export PDF disponible</li>
                            <li><i class="fas fa-check text-success me-2"></i>Filtres conservés à l'impression</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6 class="fw-bold text-success mb-3">
                            <i class="fas fa-filter me-2"></i>Fonctionnalités de Filtrage
                        </h6>
                        <ul class="list-unstyled small">
                            <li><i class="fas fa-check text-success me-2"></i>Filtrage par période de dates</li>
                            <li><i class="fas fa-check text-success me-2"></i>Recherche par produit</li>
                            <li><i class="fas fa-check text-success me-2"></i>Filtrage par catégorie</li>
                            <li><i class="fas fa-check text-success me-2"></i>Seuils critiques configurables</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Statistiques rapides -->
<div class="row mt-4">
    <div class="col-12">
        <div class="card-modern animate-fade-in">
            <div class="card-header-modern">
                <i class="fas fa-tachometer-alt me-2"></i>Statistiques Rapides
            </div>
            <div class="card-body-modern">
                <div class="row text-center">
                    <div class="col-md-3">
                        <div class="border-end">
                            <h4 class="text-primary-modern fw-bold">{{ nb_produits_en_stock|default:0 }}</h4>
                            <small class="text-muted">Produits en stock</small>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="border-end">
                            <h4 class="text-success fw-bold">{{ commandes_en_attente|default:0 }}</h4>
                            <small class="text-muted">Commandes en attente</small>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="border-end">
                            <h4 class="text-warning fw-bold">{{ alertes_stock_faible|default:0 }}</h4>
                            <small class="text-muted">Alertes stock faible</small>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div>
                            <h4 class="text-info fw-bold">{{ receptions_aujourd_hui|default:0 }}</h4>
                            <small class="text-muted">Réceptions aujourd'hui</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %} 